<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test POS Fullscreen Menu</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container mt-4">
        <h2>Test POS Fullscreen Menu Option</h2>
        
        <div class="alert alert-info">
            <h5><i class="bi bi-info-circle me-2"></i>Test Scenario</h5>
            <p>Testing that the POS Fullscreen option appears in the sidebar menu for different user roles.</p>
        </div>
        
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="bi bi-person-gear me-2"></i>Super Admin Menu</h5>
                    </div>
                    <div class="card-body">
                        <ul class="list-group" id="superAdminMenu"></ul>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="bi bi-person-check me-2"></i>Kasir Menu</h5>
                    </div>
                    <div class="card-body">
                        <ul class="list-group" id="kasirMenu"></ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mt-4">
            <div class="card">
                <div class="card-header">
                    <h5><i class="bi bi-check-circle me-2"></i>Test Results</h5>
                </div>
                <div class="card-body">
                    <div id="testResults"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Mock current user for testing
        let currentUser = { role: 'super_admin', name: 'Test Admin' };
        
        // Test menu structure (copied from auth.js)
        const menus = {
            super_admin: [
                { icon: 'bi-speedometer2', text: 'Dashboard', page: 'dashboard' },
                { icon: 'bi-gear-fill', text: 'Pengaturan Sistem', page: 'system-settings' },
                { icon: 'bi-shield-lock', text: 'Audit Log', page: 'audit-log' },
                { icon: 'bi-building', text: 'Data Koperasi', page: 'koperasi' },
                { icon: 'bi-people', text: 'Master Anggota', page: 'anggota' },
                { icon: 'bi-diagram-3', text: 'Master Departemen', page: 'departemen' },
                { icon: 'bi-credit-card-2-front', text: 'Aktivasi Kartu', page: 'aktivasi-kartu' },
                { icon: 'bi-wallet2', text: 'Simpanan', page: 'simpanan' },
                { icon: 'bi-cash-coin', text: 'Pinjaman', page: 'pinjaman' },
                { icon: 'bi-box-arrow-right', text: 'Anggota Keluar', page: 'anggota-keluar' },
                { icon: 'bi-calendar-check', text: 'Saldo Awal Periode', page: 'saldo-awal' },
                { icon: 'bi-journal-text', text: 'Chart of Account', page: 'coa' },
                { icon: 'bi-book', text: 'Jurnal', page: 'jurnal' },
                { icon: 'bi-calculator', text: 'SHU', page: 'shu' },
                { icon: 'bi-currency-exchange', text: 'Pembayaran Hutang/Piutang', page: 'pembayaran-hutang-piutang' },
                { icon: 'bi-cart', text: 'Point of Sales', page: 'pos' },
                { icon: 'bi-fullscreen', text: 'POS Fullscreen', page: 'pos-fullscreen' },
                { icon: 'bi-clipboard-check', text: 'Kelola Pengajuan Modal', page: 'kelola-pengajuan-modal' },
                { icon: 'bi-clock-history', text: 'Riwayat Pengajuan Modal', page: 'riwayat-pengajuan-admin' },
                { icon: 'bi-box-seam', text: 'Master Barang', page: 'barang' },
                { icon: 'bi-arrow-left-right', text: 'Transformasi Barang', page: 'transformasi-barang' },
                { icon: 'bi-truck', text: 'Supplier', page: 'supplier' },
                { icon: 'bi-bag-plus', text: 'Pembelian', page: 'pembelian' },
                { icon: 'bi-clipboard-data', text: 'Stok Opname', page: 'stokopname' },
                { icon: 'bi-trash', text: 'Hapus Transaksi', page: 'hapus-transaksi' },
                { icon: 'bi-clock-history', text: 'Riwayat Hapus Transaksi', page: 'riwayat-hapus-transaksi' },
                { icon: 'bi-clock-history', text: 'Riwayat Tutup Kasir', page: 'riwayat-tutup-kas' },
                { icon: 'bi-database', text: 'Backup & Restore', page: 'backup-restore' },
                { icon: 'bi-file-earmark-text', text: 'Laporan', page: 'laporan' },
                { icon: 'bi-file-earmark-bar-graph', text: 'Laporan Transaksi & Simpanan', page: 'laporan-transaksi-simpanan' },
                { icon: 'bi-person-gear', text: 'Manajemen User', page: 'users' },
                { icon: 'bi-info-circle', text: 'Tentang Aplikasi', page: 'tentang' }
            ],
            kasir: [
                { icon: 'bi-cart', text: 'Point of Sales', page: 'pos' },
                { icon: 'bi-fullscreen', text: 'POS Fullscreen', page: 'pos-fullscreen' },
                { icon: 'bi-currency-exchange', text: 'Pembayaran Hutang/Piutang', page: 'pembayaran-hutang-piutang' },
                { icon: 'bi-receipt', text: 'Riwayat Transaksi', page: 'riwayat' },
                { icon: 'bi-file-earmark-text', text: 'Riwayat Pengajuan Modal', page: 'riwayat-pengajuan-kasir' },
                { icon: 'bi-trash', text: 'Hapus Transaksi', page: 'hapus-transaksi' },
                { icon: 'bi-clock-history', text: 'Riwayat Hapus Transaksi', page: 'riwayat-hapus-transaksi' },
                { icon: 'bi-clock-history', text: 'Riwayat Tutup Kasir', page: 'riwayat-tutup-kas' },
                { icon: 'bi-file-earmark-bar-graph', text: 'Laporan Transaksi & Simpanan', page: 'laporan-transaksi-simpanan' },
                { icon: 'bi-info-circle', text: 'Tentang Aplikasi', page: 'tentang' }
            ]
        };
        
        function renderTestMenu(role, containerId) {
            const container = document.getElementById(containerId);
            const userMenus = menus[role] || [];
            
            // Find POS related menus
            const posMenus = userMenus.filter(menu => 
                menu.page === 'pos' || menu.page === 'pos-fullscreen'
            );
            
            container.innerHTML = userMenus.map(menu => {
                const isHighlighted = menu.page === 'pos' || menu.page === 'pos-fullscreen';
                const itemClass = isHighlighted ? 'list-group-item-success' : '';
                
                return `
                    <li class="list-group-item ${itemClass}">
                        <i class="${menu.icon} me-2"></i>${menu.text}
                        ${isHighlighted ? '<span class="badge bg-primary ms-2">POS</span>' : ''}
                    </li>
                `;
            }).join('');
            
            return posMenus;
        }
        
        function runTests() {
            console.log('üß™ Running POS Fullscreen Menu Tests...');
            
            const superAdminPosMenus = renderTestMenu('super_admin', 'superAdminMenu');
            const kasirPosMenus = renderTestMenu('kasir', 'kasirMenu');
            
            const results = [];
            
            // Test 1: Check if POS Fullscreen exists in Super Admin menu
            const superAdminHasFullscreen = superAdminPosMenus.some(menu => menu.page === 'pos-fullscreen');
            results.push({
                test: 'Super Admin has POS Fullscreen option',
                passed: superAdminHasFullscreen,
                details: superAdminHasFullscreen ? 'Found POS Fullscreen in Super Admin menu' : 'POS Fullscreen NOT found in Super Admin menu'
            });
            
            // Test 2: Check if POS Fullscreen exists in Kasir menu
            const kasirHasFullscreen = kasirPosMenus.some(menu => menu.page === 'pos-fullscreen');
            results.push({
                test: 'Kasir has POS Fullscreen option',
                passed: kasirHasFullscreen,
                details: kasirHasFullscreen ? 'Found POS Fullscreen in Kasir menu' : 'POS Fullscreen NOT found in Kasir menu'
            });
            
            // Test 3: Check if both normal POS and fullscreen POS exist
            const superAdminHasBoth = superAdminPosMenus.length >= 2;
            const kasirHasBoth = kasirPosMenus.length >= 2;
            results.push({
                test: 'Both normal POS and fullscreen POS exist',
                passed: superAdminHasBoth && kasirHasBoth,
                details: `Super Admin: ${superAdminPosMenus.length} POS options, Kasir: ${kasirPosMenus.length} POS options`
            });
            
            // Display results
            const resultsContainer = document.getElementById('testResults');
            resultsContainer.innerHTML = results.map(result => `
                <div class="alert ${result.passed ? 'alert-success' : 'alert-danger'}">
                    <h6>
                        <i class="bi ${result.passed ? 'bi-check-circle' : 'bi-x-circle'} me-2"></i>
                        ${result.test}
                    </h6>
                    <p class="mb-0">${result.details}</p>
                </div>
            `).join('');
            
            const allPassed = results.every(r => r.passed);
            console.log(allPassed ? '‚úÖ All tests passed!' : '‚ùå Some tests failed!');
            
            return allPassed;
        }
        
        // Run tests when page loads
        document.addEventListener('DOMContentLoaded', runTests);
    </script>
</body>
</html>